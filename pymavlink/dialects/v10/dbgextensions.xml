<?xml version='1.0'?>
<mavlink>
     <include>common.xml</include>
     <enums>
          <enum name="BOOTLOADER_COMMANDS">
               <description>Bootloader/debug command definitions</description>
               <entry value="1" name="BOOT_INITIATE_SESSION"><description></description></entry>
               <entry value="2" name="BOOT_RESET"><description></description></entry>
               <entry value="3" name="BOOT_STOP_CURRENT_TRANSFER"><description></description></entry>
               <entry value="4" name="BOOT_GET_PROCESSOR_INFORMATION"><description></description></entry>
               <entry value="5" name="BOOT_PROCESSOR_MODEL"><description></description></entry>
               <entry value="6" name="BOOT_ARCHITECTURE"><description></description></entry>
               <entry value="7" name="BOOT_PAGE_SIZE"><description></description></entry>
               <entry value="8" name="BOOT_PROCESSOR_ID"><description></description></entry>
               <entry value="9" name="BOOT_TARGET_VOLTAGE"><description></description></entry>
               <entry value="10" name="BOOT_USERPAGE_ADDRESS"><description></description></entry>

               <entry value="16" name="BOOT_START_APPLICATION"><description></description></entry>
               <entry value="17" name="BOOT_START_AT_ADDRESS"><description></description></entry>
               <entry value="18" name="BOOT_ERASE_FLASH"><description></description></entry>
               <entry value="19" name="BOOT_ERASE_USERPAGE"><description></description></entry>
               <entry value="20" name="BOOT_START_REPROGRAM"><description></description></entry>
               <entry value="21" name="BOOT_STOP_REPROGRAM"><description></description></entry>
               <entry value="22" name="BOOT_WRITE_TO_BUFFER"><description></description></entry>
               <entry value="23" name="BOOT_WRITE_BUFFER_TO_FLASH"><description></description></entry>
               <entry value="24" name="BOOT_WRITE_BUFFER_TO_USERPAGE"><description></description></entry>
               <entry value="25" name="BOOT_READ_MEMORY"><description></description></entry>
               <entry value="26" name="BOOT_WRITE_FUSES"><description></description></entry>
               <entry value="27" name="BOOT_READ_FUSES"><description></description></entry>

               <entry value="128" name="ACK_FLAG"><description></description></entry>

          </enum>
     </enums>
     <messages>
          <message id="244" name="RAW_DATA_STREAM_8">
               <description>Raw data stream (8-bit) or multi-packet arrays</description>
               <field type="uint32_t" name="time_boot_ms">Timestamp (milliseconds since system boot)</field>
               <field type="uint8_t" name="stream_id">Stream ID</field>
               <field type="uint8_t" name="packets_per_block">Number of packets per block (0 if continuous stream)</field>
               <field type="uint8_t" name="packet_id">packet counter</field>
               <field type="uint8_t" name="sample_count">Number of valid samples in this packet</field>
               <field type="uint8_t[64]" name="values">raw sample values</field>
          </message>

          <message id="245" name="RAW_DATA_STREAM_16">
               <description>Raw data stream (16-bit) or multi-packet arrays</description>
               <field type="uint32_t" name="time_boot_ms">Timestamp (milliseconds since system boot)</field>
               <field type="uint8_t" name="stream_id">Stream ID</field>
               <field type="uint8_t" name="packets_per_block">Number of packets per block (0 if continuous stream)</field>
               <field type="uint8_t" name="packet_id">packet counter</field>
               <field type="uint8_t" name="sample_count">Number of valid samples in this packet</field>
               <field type="int16_t[64]" name="values">raw sample values</field>
          </message>
          <message id="246" name="RAW_DATA_STREAM_FLOAT">
               <description>Raw data stream (32-bit float) or multi-packet arrays</description>
               <field type="uint32_t" name="time_boot_ms">Timestamp (milliseconds since system boot)</field>
               <field type="uint8_t" name="stream_id">Stream ID</field>
               <field type="uint8_t" name="packets_per_block">Number of packets per block (0 if continuous stream)</field>
               <field type="uint8_t" name="packet_id">packet counter</field>
               <field type="uint8_t" name="sample_count">Number of valid samples in this packet</field>
               <field type="float[32]" name="values">raw sample values</field>
          </message>

          <message id="247" name="BOOTLOADER_CMD">
               <description>Additional information on existing messages and commands</description>
               <field type="uint8_t" name="target_system">System which should execute the command</field>
               <field type="uint8_t" name="target_component">Component which should execute the command, 0 for all components</field>
               <field type="uint32_t" name="session_message_counter">unique session handle negotiated when entering boot mode. Incremented by master with each message. Slave returns the last received and processed message as acknowledgement.</field>
               <field type="uint8_t" name="command">Command ID, as defined by BOOTLOADER_CMD enum.</field>
               <field type="uint8_t" name="error_id">Error code in response to previous command or transfer as defined by BOOTLOADER_ERROR enum.</field>
               <field type="uint32_t" name="param_address">Command parameter 1 or memory address depending on command</field>
               <field type="uint32_t" name="param_length"> Command parameter 2 or transfer length depending on command</field>
          </message>

          <message id="248" name="BOOTLOADER_DATA">
               <description>Bootloader memory transfer (reading or writing) for flash or RAM transfers.</description>
               <field type="uint8_t" name="target_system">System which should execute the command</field>
               <field type="uint8_t" name="target_component">Component which should execute the command, 0 for all components</field>
               <field type="uint32_t" name="session_message_counter">unique session handle negotiated when entering boot mode. Incremented by master with each message. Slave returns the last received and processed message as acknowledgement.</field>
               <field type="uint8_t" name="command">Command ID, as defined by BOOTLOADER_CMD enum.</field>
               <field type="uint32_t" name="base_address">32bit memory base address to write to / read from. </field>
               <field type="uint8_t" name="data_length">length of data block (number of valid bytes in data)</field>
               <field type="uint8_t[32]" name="data">raw data for memory transfer</field>

          </message>

     </messages>
</mavlink>
